//create table emprunts(
    idem int4 primary key not null,
    dateemp varchar(25),
    dateret varchar(25),
    emprunteur int4,
    exemempr int4
    );
    
//create table usagers(
    idu int4 primary key not null,
    nom varchar(25),
    prenom varchar(25),
    status varchar(25),
    email varchar(40)
    );    

//create table exemplaire(
    idex int4 primary key not null,
    exemliv int4
    );    


//Esta encuesta devuelve el historico de prestamos (FECHA DE INICIO - FECHA DE FIN - TITULO DEL LIBRO - APELLIDO DEL USUARIO - NOMBRE DEL USUARIO - ID EJEMPLAR)

select emp.dateemp, emp.dateret, liv.titre, us.nom, us.prenom, ex.idex
from usagers us join emprunts emp on us.idu=emp.emprunteur
join  exemplaire ex on ex.idex=emp.exemempr
join livre liv on ex.exemliv=liv.id
order by dateemp desc;

//Esta encuesta devuelve los prestamos en curso (FECHA DE INICIO - TITULO DEL LIBRO - APELLIDO DEL USUARIO - NOMBRE DEL USUARIO - ID EJEMPLAR)


select emp.dateemp, liv.titre, us.nom, us.prenom, ex.idex
from usagers us join emprunts emp on us.idu=emp.emprunteur
join exemplaire ex on ex.idex=emp.exemempr
join livre liv on ex.exemliv=liv.id
where emp.dateret is null
order by dateemp desc;

//Esta encuesta devuelve la lista de abonados (IDU - NOM - PRENOM - STATUS - EMAIL)
select us.idu, us.nom, us.prenom, us.status, us.email
from usagers us;

//Esta encuesta devuelve la lista de libros (ID - ISBN10 - ISBN 13 - TITRE - AUTEUR)
select liv.id, liv.isbn10, liv.isbn13, liv.titre, liv.auteur
from livre liv;

//Esta sentencia permite agregar un libro a la base de datos
INSERT INTO livre VALUES (idx,isbn10x,isbn13x,titrex,auteurx)

// idx Id Libro, la x indica que es una variable ingresada mediante la interfaz grafica 
// isbn10x ISBN10, la x indica que es una variable ingresada mediante la interfaz grafica
// isbn13x ISBN13, la x indica que es una variable ingresada mediante la interfaz grafica
// titrex Titulo del Libro, la x indica que es una variable ingresada mediante la interfaz grafica
// auteurx Autor del libro, la x indica que es una variable ingresada mediante la interfaz grafica

//Esta sentencia permite agregar un abonado a la base de datos
INSERT INTO livre VALUES (nomx,prenomx,occupationx,emailx)

// nomx Apellido del Abonado, la x indica que es una variable ingresada mediante la interfaz grafica 
// prenomx Nombre del Abonado, la x indica que es una variable ingresada mediante la interfaz grafica
// occupationx Etudiant/Enseignant, la x indica que es una variable ingresada mediante la interfaz grafica
// emailx Correo electronico del Abonado, la x indica que es una variable ingresada mediante la interfaz grafica

INSERT INTO livre emprunts (nomx,prenomx,occupationx,emailx)

//Gestion de Emprunts> Emprunter
//Con este codigo vamos a comparar la existencia del usuario, del ejemplar y aue el usuario no pueda retirar 2 libros iguales el mismo dia, para luego generar la variable IDEM, aue se compondrra de IDEM=IDU+IDX
select idu from usagers
select idx from exemplaire
select id from livres

INSERT INTO emprunts VALUES(IDEMy, dateempy, daterety);
idexy
